<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clientes | Essenza</title>

  <!-- CSS -->
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    /* Cards de resumo */
    .resumo-clientes {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .resumo-clientes__card {
      background: var(--cor-bg);
      border-radius: var(--raio);
      box-shadow: var(--sombra);
      padding: 1rem;
      text-align: center;
      border-left: 4px solid var(--cor-primaria);
    }

    .resumo-clientes__card--total { border-left-color: #4169e1; }
    .resumo-clientes__card--ativos { border-left-color: #228b22; }
    .resumo-clientes__card--inativos { border-left-color: #999; }

    .resumo-clientes__label {
      font-size: 0.8rem;
      color: var(--cor-muted);
      margin-bottom: 0.25rem;
    }

    .resumo-clientes__value {
      font-size: 1.5rem;
      font-weight: 600;
    }

    /* Bot√£o grande */
    .btn--large {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
    }

    /* Bot√µes de a√ß√£o */
    .btn--success {
      background: #228b22;
      color: white;
      border: none;
    }
    .btn--success:hover { background: #1a6b1a; }

    .btn--warning {
      background: #daa520;
      color: white;
      border: none;
    }
    .btn--warning:hover { background: #b8860b; }

    /* Card formul√°rio */
    .card-formulario {
      border: 2px solid var(--cor-primaria);
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-formulario.modo-edicao {
      border-color: #4169e1;
    }

    .card-formulario.modo-edicao .card__header {
      background: rgba(65, 105, 225, 0.1);
    }

    /* Formul√°rio em grupos */
    .form-group {
      background: var(--cor-bg-alt, #f9f9f9);
      border-radius: var(--raio);
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--cor-borda);
    }

    .form-group__title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--cor-primaria);
      margin-bottom: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* A√ß√µes do formul√°rio */
    #acoesFormulario {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    /* Status na tabela */
    .cliente-inativo {
      opacity: 0.6;
      text-decoration: line-through;
    }

    /* Linha selecionada */
    .table tr.selecionada {
      background: rgba(139, 92, 165, 0.15) !important;
    }

    /* Mobile */
    @media (max-width: 768px) {
      .resumo-clientes {
        grid-template-columns: repeat(3, 1fr);
      }
      #acoesFormulario {
        flex-direction: column;
      }
      #acoesFormulario .btn {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <header class="app-header">
    <div class="app-header__inner">
      <h1 class="app-title">Cadastro de Clientes</h1>

      <nav class="app-nav" aria-label="Navega√ß√£o principal">
        <a class="app-nav__link" href="dashboard.html">Dashboard</a>
        <a class="app-nav__link app-nav__link--active" href="index.html">Clientes</a>
        <a class="app-nav__link" href="fornecedores.html">Fornecedores</a>
        <a class="app-nav__link" href="lancamentos.html">Lan√ßamentos</a>
        <a class="app-nav__link" href="resumo.html">Resumo</a>
        <a class="app-nav__link" href="categoria.html">Categoria</a>
        <button type="button" id="themeToggle" class="theme-toggle" title="Alternar tema">üåô</button>
      </nav>
    </div>
  </header>

  <main class="app-main">
    <!-- RESUMO -->
    <section class="resumo-clientes" id="resumoClientes" style="display:none;">
      <div class="resumo-clientes__card resumo-clientes__card--total">
        <div class="resumo-clientes__label">Total</div>
        <div class="resumo-clientes__value" id="resumoTotal">0</div>
      </div>
      <div class="resumo-clientes__card resumo-clientes__card--ativos">
        <div class="resumo-clientes__label">Ativos</div>
        <div class="resumo-clientes__value" id="resumoAtivos">0</div>
      </div>
      <div class="resumo-clientes__card resumo-clientes__card--inativos">
        <div class="resumo-clientes__label">Inativos</div>
        <div class="resumo-clientes__value" id="resumoInativos">0</div>
      </div>
    </section>

    <!-- BOT√ÉO NOVO CLIENTE -->
    <div class="acoes-principais" style="margin-bottom: 1rem;">
      <button type="button" id="btnAbrirNovoCliente" class="btn btn--primary btn--large">
        + Novo Cliente
      </button>
    </div>

    <!-- FORMUL√ÅRIO CLIENTE -->
    <section class="card card-formulario" id="cardFormulario" style="display: none;">
      <div class="card__header" style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <h2 class="card__title" id="tituloFormulario">Novo Cliente</h2>
          <p class="card__desc" id="descFormulario">Preencha os dados do cliente.</p>
        </div>
        <button type="button" id="btnFecharForm" class="btn btn--secondary" title="Fechar">‚úï</button>
      </div>

      <div class="card__body">
        <form id="formCadastro" autocomplete="on">
          <input type="hidden" id="idCliente" name="ID_Cliente" />
          <input type="hidden" id="rowIndex" name="rowIndex" />

          <!-- Grupo: Dados Principais -->
          <div class="form-group">
            <div class="form-group__title">Dados Principais</div>
            <div class="form-row">
              <div class="field">
                <label class="label" for="nomeCliente">Nome *</label>
                <input class="input" type="text" id="nomeCliente" name="NomeCliente" required placeholder="Nome completo" />
              </div>
              <div class="field">
                <label class="label" for="telefone">Telefone *</label>
                <input class="input" type="tel" id="telefone" name="Telefone" inputmode="tel" placeholder="(00) 00000-0000" required />
              </div>
            </div>
            <div class="form-row">
              <div class="field">
                <label class="label" for="email">E-mail</label>
                <input class="input" type="email" id="email" name="E-mail" placeholder="email@exemplo.com" />
              </div>
              <div class="field">
                <label class="label" for="dataNascimento">Data de Nascimento</label>
                <input class="input" type="date" id="dataNascimento" name="DataNascimento" />
              </div>
            </div>
          </div>

          <!-- Grupo: Endere√ßo -->
          <div class="form-group">
            <div class="form-group__title">Endere√ßo</div>
            <div class="form-row">
              <div class="field">
                <label class="label" for="municipio">Munic√≠pio</label>
                <input class="input" type="text" id="municipio" name="Municipio" />
              </div>
              <div class="field">
                <label class="label" for="bairro">Bairro</label>
                <input class="input" type="text" id="bairro" name="Bairro" />
              </div>
            </div>
          </div>

          <!-- Grupo: Informa√ß√µes Adicionais -->
          <div class="form-group">
            <div class="form-group__title">Informa√ß√µes Adicionais</div>
            <div class="form-row">
              <div class="field">
                <label class="label" for="profissao">Profiss√£o</label>
                <input class="input" type="text" id="profissao" name="Profiss√£o" list="listaProfissoes" />
                <datalist id="listaProfissoes">
                  <option value="Administradora">
                  <option value="Advogada">
                  <option value="Aposentada">
                  <option value="Arquiteta">
                  <option value="Aut√¥noma">
                  <option value="Auxiliar Administrativa">
                  <option value="Banc√°ria">
                  <option value="Cabelereira">
                  <option value="Comerciante">
                  <option value="Contadora">
                  <option value="Dentista">
                  <option value="Designer">
                  <option value="Do Lar">
                  <option value="Empres√°ria">
                  <option value="Enfermeira">
                  <option value="Engenheira">
                  <option value="Estudante">
                  <option value="Farmac√™utica">
                  <option value="Fisioterapeuta">
                  <option value="Funcion√°ria P√∫blica">
                  <option value="Jornalista">
                  <option value="Manicure">
                  <option value="M√©dica">
                  <option value="Nutricionista">
                  <option value="Professora">
                  <option value="Psic√≥loga">
                  <option value="Recepcionista">
                  <option value="Secret√°ria">
                  <option value="Servidora P√∫blica">
                  <option value="T√©cnica de Enfermagem">
                  <option value="Vendedora">
                  <option value="Veterin√°ria">
                  <option value="Outra">
                </datalist>
              </div>
              <div class="field">
                <label class="label" for="origem">Como nos conheceu?</label>
                <select class="select" id="origem" name="Origem">
                  <option value="">Selecione</option>
                  <option value="Indica√ß√£o">Indica√ß√£o</option>
                  <option value="Instagram">Instagram</option>
                  <option value="Google">Google</option>
                  <option value="WhatsApp">WhatsApp</option>
                  <option value="Passou na porta">Passou na porta</option>
                  <option value="Outro">Outro</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="field">
                <label class="label" for="preferencias">Prefer√™ncias</label>
                <input class="input" type="text" id="preferencias" name="Prefer√™ncias" placeholder="Ex.: loiro, progressiva, corte curto..." />
              </div>
              <div class="field">
                <label class="label" for="dataCadastro">Data de Cadastro</label>
                <input class="input" type="date" id="dataCadastro" name="DataCadastro" />
              </div>
            </div>
          </div>

          <!-- Observa√ß√£o -->
          <div class="form-row">
            <div class="field field--full">
              <label class="label" for="observacao">Observa√ß√µes</label>
              <textarea class="textarea" id="observacao" name="Observa√ß√£o" rows="2" placeholder="Anota√ß√µes importantes..."></textarea>
            </div>
          </div>

          <!-- A√ß√µes -->
          <div class="actions" id="acoesFormulario">
            <button type="submit" id="btnSalvar" class="btn btn--primary">Salvar</button>
            <button type="button" id="btnLimpar" class="btn btn--secondary" style="display:none;">Limpar / Novo</button>
            <button type="button" id="btnInativar" class="btn btn--warning" style="display:none;">Inativar</button>
            <button type="button" id="btnAtivar" class="btn btn--success" style="display:none;">Reativar</button>
            <button type="button" id="btnExcluir" class="btn btn--danger" style="display:none;">Excluir</button>
          </div>

          <div id="feedback" class="feedback" aria-live="polite" role="status"></div>
        </form>
      </div>
    </section>

    <!-- Busca e Lista -->
    <section class="card">
      <div class="card__header">
        <h2 class="card__title">Clientes</h2>
        <p class="card__desc">Clique em um cliente para editar.</p>
      </div>

      <div class="card__body">
        <form id="formBusca" autocomplete="off">
          <div class="form-row">
            <div class="field field--full">
              <div class="input-group">
                <input class="input" type="text" id="q" name="q" placeholder="Buscar por nome ou telefone..." />
                <button type="button" id="btnBuscar" class="btn btn--primary">Buscar</button>
                <button type="button" id="btnLimparBusca" class="btn btn--secondary">Limpar</button>
              </div>
            </div>
          </div>
        </form>

        <div id="feedbackLista" class="feedback" aria-live="polite" role="status" style="margin: 0.5rem 0;"></div>

        <div class="table-wrap">
          <table class="table" id="tabelaResultados">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Telefone</th>
                <th>E-mail</th>
                <th>Munic√≠pio</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <small>Cadastro ‚Ä¢ Google Planilhas + Apps Script</small>
  </footer>

  <!-- JS -->
  <script src="assets/js/theme.js"></script>
  <script src="assets/js/config.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="assets/js/api.js"></script>
  <script src="assets/js/search.js"></script>
  <script src="assets/js/cadastro.js" defer></script>
</body>
</html>
