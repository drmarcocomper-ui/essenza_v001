<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Categorias | Essenza</title>

  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    /* Resumo */
    .resumo-categorias {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .resumo-categorias__card {
      background: var(--cor-bg);
      border-radius: var(--raio);
      box-shadow: var(--sombra);
      padding: 1rem;
      text-align: center;
      border-left: 4px solid var(--cor-primaria);
    }

    .resumo-categorias__card--total { border-left-color: #4169e1; }
    .resumo-categorias__card--entradas { border-left-color: #228b22; }
    .resumo-categorias__card--saidas { border-left-color: #c41e3a; }
    .resumo-categorias__card--inativos { border-left-color: #999; }

    .resumo-categorias__label {
      font-size: 0.8rem;
      color: var(--cor-muted);
      margin-bottom: 0.25rem;
    }

    .resumo-categorias__value {
      font-size: 1.5rem;
      font-weight: 600;
    }

    /* Bot√£o grande */
    .btn--large {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
    }

    /* Bot√µes de a√ß√£o */
    .btn--success {
      background: #228b22;
      color: white;
      border: none;
    }
    .btn--success:hover { background: #1a6b1a; }

    .btn--warning {
      background: #daa520;
      color: white;
      border: none;
    }
    .btn--warning:hover { background: #b8860b; }

    /* Card formul√°rio */
    .card-formulario {
      border: 2px solid var(--cor-primaria);
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-formulario.modo-edicao {
      border-color: #4169e1;
    }

    .card-formulario.modo-edicao .card__header {
      background: rgba(65, 105, 225, 0.1);
    }

    /* Formul√°rio em grupos */
    .form-group {
      background: var(--cor-bg-alt, #f9f9f9);
      border-radius: var(--raio);
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--cor-borda);
    }

    .form-group__title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--cor-primaria);
      margin-bottom: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* A√ß√µes do formul√°rio */
    #acoesFormulario {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    /* Categoria inativa na tabela */
    .categoria-inativa {
      opacity: 0.6;
    }

    /* Linha selecionada */
    .table tr.selecionada {
      background: rgba(139, 92, 165, 0.15) !important;
    }

    /* Cores por tipo */
    .tipo-entrada { color: #228b22; font-weight: 500; }
    .tipo-saida { color: #c41e3a; font-weight: 500; }

    /* Mobile */
    @media (max-width: 768px) {
      .resumo-categorias {
        grid-template-columns: repeat(2, 1fr);
      }
      #acoesFormulario {
        flex-direction: column;
      }
      #acoesFormulario .btn {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <header class="app-header">
    <div class="app-header__inner">
      <h1 class="app-title">Categorias</h1>

      <nav class="app-nav" aria-label="Navega√ß√£o principal">
        <a class="app-nav__link" href="dashboard.html">Dashboard</a>
        <a class="app-nav__link" href="index.html">Clientes</a>
        <a class="app-nav__link" href="fornecedores.html">Fornecedores</a>
        <a class="app-nav__link" href="lancamentos.html">Lan√ßamentos</a>
        <a class="app-nav__link" href="resumo.html">Resumo</a>
        <a class="app-nav__link app-nav__link--active" href="categoria.html">Categorias</a>
        <button type="button" id="themeToggle" class="theme-toggle" title="Alternar tema">üåô</button>
      </nav>
    </div>
  </header>

  <main class="app-main">
    <!-- RESUMO -->
    <section class="resumo-categorias" id="resumoCategorias" style="display:none;">
      <div class="resumo-categorias__card resumo-categorias__card--total">
        <div class="resumo-categorias__label">Total</div>
        <div class="resumo-categorias__value" id="resumoTotal">0</div>
      </div>
      <div class="resumo-categorias__card resumo-categorias__card--entradas">
        <div class="resumo-categorias__label">Entrada</div>
        <div class="resumo-categorias__value" id="resumoEntradas">0</div>
      </div>
      <div class="resumo-categorias__card resumo-categorias__card--saidas">
        <div class="resumo-categorias__label">Sa√≠da</div>
        <div class="resumo-categorias__value" id="resumoSaidas">0</div>
      </div>
      <div class="resumo-categorias__card resumo-categorias__card--inativos">
        <div class="resumo-categorias__label">Inativas</div>
        <div class="resumo-categorias__value" id="resumoInativos">0</div>
      </div>
    </section>

    <!-- BOT√ÉO NOVA CATEGORIA -->
    <div class="acoes-principais" style="margin-bottom: 1rem;">
      <button type="button" id="btnAbrirNovaCategoria" class="btn btn--primary btn--large">
        + Nova Categoria
      </button>
    </div>

    <!-- FORMUL√ÅRIO CATEGORIA -->
    <section class="card card-formulario" id="cardFormulario" style="display: none;">
      <div class="card__header" style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <h2 class="card__title" id="tituloFormulario">Nova Categoria</h2>
          <p class="card__desc" id="descFormulario">Crie categorias para organizar seus lan√ßamentos.</p>
        </div>
        <button type="button" id="btnFecharForm" class="btn btn--secondary" title="Fechar">‚úï</button>
      </div>

      <div class="card__body">
        <form id="formCategoria" autocomplete="off">
          <input type="hidden" id="ID_Categoria" name="ID_Categoria" />
          <input type="hidden" id="rowIndex" name="rowIndex" />

          <!-- Grupo: Dados Principais -->
          <div class="form-group">
            <div class="form-group__title">Dados Principais</div>
            <div class="form-row">
              <div class="field">
                <label class="label" for="Tipo">Tipo *</label>
                <select class="select" id="Tipo" name="Tipo" required>
                  <option value="">Selecione</option>
                  <option value="Entrada">Entrada</option>
                  <option value="Saida">Sa√≠da</option>
                </select>
              </div>
              <div class="field">
                <label class="label" for="Categoria">Categoria *</label>
                <input class="input" type="text" id="Categoria" name="Categoria" required placeholder="Ex.: Procedimentos, Aluguel..." />
              </div>
            </div>
          </div>

          <!-- Grupo: Configura√ß√µes -->
          <div class="form-group">
            <div class="form-group__title">Configura√ß√µes</div>
            <div class="form-row">
              <div class="field">
                <label class="label" for="Ativo">Status</label>
                <select class="select" id="Ativo" name="Ativo">
                  <option value="Sim">Ativo</option>
                  <option value="Nao">Inativo</option>
                </select>
              </div>
              <div class="field">
                <label class="label" for="Ordem">Ordem</label>
                <input class="input" type="number" id="Ordem" name="Ordem" min="0" step="1" placeholder="Ex.: 10" />
                <small class="hint">Opcional: controla a ordem na lista.</small>
              </div>
            </div>
            <div class="form-row">
              <div class="field field--full">
                <label class="label" for="Descricao_Padrao">Descri√ß√£o Padr√£o</label>
                <input class="input" type="text" id="Descricao_Padrao" name="Descricao_Padrao" placeholder="Ex.: Progressiva | Manicure | Luzes..." />
                <small class="hint">Sugest√µes que aparecem no lan√ßamento. Separe com | ou v√≠rgula.</small>
              </div>
            </div>
          </div>

          <!-- A√ß√µes -->
          <div class="actions" id="acoesFormulario">
            <button type="submit" id="btnSalvar" class="btn btn--primary">Salvar</button>
            <button type="button" id="btnLimpar" class="btn btn--secondary" style="display:none;">Limpar / Nova</button>
            <button type="button" id="btnInativar" class="btn btn--warning" style="display:none;">Inativar</button>
            <button type="button" id="btnAtivar" class="btn btn--success" style="display:none;">Ativar</button>
            <button type="button" id="btnExcluir" class="btn btn--danger" style="display:none;">Excluir</button>
          </div>

          <div id="feedbackSalvar" class="feedback" aria-live="polite" role="status"></div>
        </form>
      </div>
    </section>

    <!-- FILTRO / BUSCA -->
    <section class="card">
      <div class="card__header">
        <h2 class="card__title">Categorias</h2>
        <p class="card__desc">Clique em uma categoria para editar.</p>
      </div>

      <div class="card__body">
        <form id="formFiltroCategoria" autocomplete="off">
          <div class="form-row">
            <div class="field">
              <label class="label" for="fTipo">Tipo</label>
              <select class="select" id="fTipo" name="fTipo">
                <option value="">Todos</option>
                <option value="Entrada">Entrada</option>
                <option value="Saida">Sa√≠da</option>
              </select>
            </div>

            <div class="field field--full">
              <div class="input-group">
                <input class="input" type="text" id="fQ" name="fQ" placeholder="Buscar categoria..." />
                <button type="button" id="btnFiltrar" class="btn btn--primary">Buscar</button>
                <button type="button" id="btnLimparFiltro" class="btn btn--secondary">Limpar</button>
              </div>
            </div>
          </div>
        </form>

        <div id="feedbackLista" class="feedback" aria-live="polite" role="status" style="margin: 0.5rem 0;"></div>

        <div class="table-wrap" aria-label="Tabela de categorias">
          <table class="table" id="tabelaCategorias">
            <thead>
              <tr>
                <th>Tipo</th>
                <th>Categoria</th>
                <th>Descri√ß√£o Padr√£o</th>
                <th>Status</th>
                <th>Ordem</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <small>Categorias ‚Ä¢ Essenza</small>
  </footer>

  <script src="assets/js/theme.js"></script>
  <script src="assets/js/config.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="assets/js/api.js"></script>
  <script src="assets/js/categoria.js" defer></script>
</body>
</html>
